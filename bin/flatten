#! /bin/bash

# reactive-firewall/XCMBuild Tool
# ..................................
# Copyright (c) 2014-2023, Mr. Walls
# ..................................
# Licensed under APACHE-2 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
# ..........................................
# http://www.apache.org/licenses/LICENSE-2.0
# ..........................................
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.


function flatten() {
	local MULTILEVEL = "${@}" ;
	if [[ ( -e ${MULTILEVEL} ) ]] ; then
		if [[ ( -f ${MULTILEVEL} ) ]] || [[ ( -d ${MULTILEVEL} ) ]] ; then
			if [[ ( -d ${MULTILEVEL}) ]] ; then
				find ${MULTILEVEL} -mindepth 2 -type f -exec mv -vf '{}' ${MULTILEVEL}/ ';' && \
				find ${MULTILEVEL} -mindepth 2 -type d -exec rmdir -f '{}' ';' || false ;
			fi
			# do nothing for simple files
			rm -vf ~/.Trash/*
		elif [[ ( -h ${MULTILEVEL} ) ]] || [[ ( -L ${MULTILEVEL} ) ]] ; then
			unlink ${MULTILEVEL} 2>/dev/null || false ;
		fi
	fi
	unset MULTILEVEL 2>/dev/null || true ;
	true ;
}

export -f flatten ;

# source to include
